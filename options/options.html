<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GovernsAI Extension Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div id="options-container">
    <header>
      <h1>GovernsAI Settings</h1>
      <p class="subtitle">Configure the Precheck endpoint and dashboard logging.</p>
    </header>
    <form id="settings-form">
      <section class="card">
        <h2>Precheck API</h2>
        <label for="precheck-api-url">Precheck API Endpoint</label>
        <input id="precheck-api-url" type="url" placeholder="https://app.governsai.com/api/v1" autocomplete="off">
        <div class="preset-group">
          <span class="label">Quick Select</span>
          <label class="radio">
            <input type="radio" name="precheck-preset" value="console" checked>
            GovernsAI Console (app.governsai.com)
          </label>
          <label class="radio">
            <input type="radio" name="precheck-preset" value="custom">
            Custom URL
          </label>
        </div>
        <p class="hint">For local development, use Custom URL with <code>http://localhost:8000/api/v1</code></p>
        <div class="actions">
          <button id="test-connection" type="button" class="btn">Test Connection</button>
          <span id="connection-status" class="status">Status: Not tested</span>
        </div>
        <p class="hint">Connection test uses <code>/api/v1/health</code>.</p>
      </section>

      <section class="card">
        <h2>Credentials</h2>
        <label for="api-key">API Key</label>
        <input id="api-key" type="password" placeholder="Paste your API key" autocomplete="off">
        <label for="org-id">Org ID</label>
        <input id="org-id" type="text" placeholder="Optional organization ID" autocomplete="off">
      </section>

      <section class="card" id="local-policy-card">
        <h2>Local Policy Settings</h2>
        <p class="hint">These settings only apply when "Use Local Policies" is selected above.</p>
        
        <div class="form-group">
          <label class="label">Action on PII Detection</label>
          <div class="radio-group">
            <label class="radio">
              <input type="radio" name="policy-mode" value="block">
              Block Message
            </label>
            <label class="radio">
              <input type="radio" name="policy-mode" value="redact">
              Redact PII
            </label>
            <label class="radio">
              <input type="radio" name="policy-mode" value="allow">
              Allow (Log Only)
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="label">PII Types to Detect</label>
          <div class="checkbox-grid">
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="EMAIL" checked> Email
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="PHONE" checked> Phone
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="SSN" checked> SSN
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="CREDIT_CARD" checked> Credit Card
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="IP_ADDRESS"> IP Address
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="API_KEY"> API Keys
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="ADDRESS"> Address
            </label>
            <label class="checkbox">
              <input type="checkbox" name="pii-type" value="PASSWORD"> Passwords
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="label">Redaction Strategy</label>
          <div class="radio-group">
            <label class="radio">
              <input type="radio" name="redaction-strategy" value="full" checked>
              Full Redaction <span class="hint">[REDACTED_EMAIL]</span>
            </label>
            <label class="radio">
              <input type="radio" name="redaction-strategy" value="partial">
              Partial <span class="hint">•••@•••.•••</span>
            </label>
            <label class="radio">
              <input type="radio" name="redaction-strategy" value="smart">
              Smart <span class="hint">user@[REDACTED]</span>
            </label>
          </div>
        </div>
      </section>

      <!-- <section class="card">
        <h2>Dashboard Logging (Optional)</h2>
        <label for="dashboard-url">Dashboard URL</label>
        <input id="dashboard-url" type="url" placeholder="https://app.governsai.com" autocomplete="off">
        <label class="checkbox">
          <input id="enable-logging" type="checkbox">
          Enable dashboard logging
        </label>
      </section> -->

      <div class="actions footer-actions">
        <button id="save-settings" type="submit" class="btn primary">Save Settings</button>
        <span id="save-status" class="status" role="status" aria-live="polite"></span>
      </div>
    </form>
  </div>
  <script src="options.js"></script>
</body>
</html>
